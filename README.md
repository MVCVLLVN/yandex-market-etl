# ETL-–ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç–∞ (–ø—Ä–∏–º–µ—Ä: "–∫—Ä–æ—Å—Å–æ–≤–∫–∏ –º—É–∂—Å–∫–∏–µ")

–ù–µ–±–æ–ª—å—à–æ–π ETL-–ø—Ä–æ–µ–∫—Ç, —Å–æ–±—Ä–∞–Ω–Ω—ã–π –ø–æ–¥ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
–¶–µ–ª—å ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ü–∏–∫–ª: —Å–±–æ—Ä ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –≤ –ë–î ‚Üí –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç

### **1) –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (Extract + Transform)**
–°–∫—Ä–∏–ø—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç —á–µ—Ä–µ–∑ Playwright, –≤–≤–æ–¥–∏—Ç –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
**"–∫—Ä–æ—Å—Å–æ–≤–∫–∏ –º—É–∂—Å–∫–∏–µ"**, –∑–∞—Ç–µ–º —Å–∫—Ä–æ–ª–ª–∏—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é –ª–µ–Ω—Ç—É, –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç —Å–æ–±—Ä–∞–Ω—ã **1000 –∫–∞—Ä—Ç–æ—á–µ–∫**.

–°–æ–±–∏—Ä–∞—é—Ç—Å—è –ø–æ–ª—è:
- –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- —Ü–µ–Ω–∞ (float)
- —Å—Å—ã–ª–∫–∞
- —Ä–µ–π—Ç–∏–Ω–≥
- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤
- –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–±–æ—Ä–∞ (DD-MM-YYYY hh:mm:ss)

–û—à–∏–±–æ—á–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —É—Ö–æ–¥–∏—Ç –≤ –ª–æ–≥.

---

### **2) –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ SQLite**
–¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```sql
CREATE TABLE IF NOT EXISTS products (
    id            INTEGER PRIMARY KEY AUTOINCREMENT,
    name          TEXT    NOT NULL,
    price         REAL    NOT NULL,
    url           TEXT    NOT NULL,
    rating        REAL,
    reviews_count INTEGER,
    scraped_at    TEXT    NOT NULL,
    UNIQUE (url, scraped_at)
);
```

`INSERT OR IGNORE` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

---

### **3) –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
–õ–æ–≥ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç:
- –Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü ETL,
- –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è,
- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫,
- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∞–ª—å–Ω–æ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫,
- –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞,
- –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
/
‚îÇ‚îÄ‚îÄ main.py          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, orchestration ETL
‚îÇ‚îÄ‚îÄ scraper.py       # –ü–∞—Ä—Å–∏–Ω–≥ –∏ Playwright
‚îÇ‚îÄ‚îÄ db_layer.py      # –†–∞–±–æ—Ç–∞ —Å SQLite
‚îÇ‚îÄ‚îÄ inspect_db.py    # –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ç–∞–±–ª–∏—Ü—ã
‚îÇ‚îÄ‚îÄ products.db      # –°–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚îÇ‚îÄ‚îÄ README.md
```

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install playwright
playwright install
playwright install chromium
```

### 2. –ó–∞–ø—É—Å–∫ ETL
```bash
python main.py
```

### 3. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ë–î
```bash
python inspect_db.py
```

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python 3.10+
- Playwright
- SQLite
- Logging
- –¢–∏–ø–∏–∑–∞—Ü–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥

---

## –ü–æ—á–µ–º—É —Ç–∞–∫
- –°–∫—Ä–æ–ª–ª–∏–Ω–≥ –∏–¥—ë—Ç –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞—Ä—Ç–æ—á–µ–∫.
- –°–±–æ—Ä —Ç–æ—á–Ω–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏.
- –õ—ë–≥–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω –∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤.
- –ö–æ–¥ —á–∏—Ç–∞–µ–º—ã–π, –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–π.

---
